{%set name student %}
{%set args channel %}
{%extends 'boilerplate' %}
{%block 'title' %}Welcome to class: {%= channel%}{%/block %}
{%block 'css-styles' %}
	<link type="text/css" rel="stylesheet" href="/static/css/student.css" media="all">
	<link type="text/css" rel="stylesheet" href="/static/css/ninjaui.css?v=0.9.9.9" media="all">
	<link type="text/css" rel="stylesheet" href="/static/css/jquery.gritter.css" media="all">
	<link type="text/css" rel="stylesheet" href="/static/css/colorbox.css" media="all">
{%/block %}
{%block 'head' %}
	
{%/block %}

{%block 'container' %}
<div id="page">
	<span id="syncFolder"></span>
	<div id="chat" class="module">
		<form id="chatwindow">
			<div id="chatmsg">
				<div class="chathistory">
					<div class="chatscroll"><!-- id="log" -->
						<!-- class="message" class="nick" class="msg-text" -->
						{*
						<div class="msg"><span class="user">Teacher:</span>   <div class="msgcon">Etiam in tincidunt arcu. Nulla at augue sem.</div><div class="ts">12:44 am</div></div>
						<div class="msg"><span class="user">Teacher:</span>   <div class="msgcon">Aliquam enim neque, tempor eu sodales a, fermentum et urna.</div><div class="ts">12:44 am</div></div>
						<div class="msg"><span class="user">Teacher:</span>   <div class="msgcon">Etiam in tincidunt arcu. Nulla u sodales a, feu sodales a, fermentum et urna.</div><div class="ts">12:44 am</div></div>
						<div class="msg"><span class="user">Teacher:</span>   <div class="msgcon">Aliquam enim neque, tempor eu sodales a, fermentum et urna.</div><div class="ts">12:44 am</div></div>
						<div class="msg"><span class="user">Teacher:</span>   <div class="msgcon">Etiam in tincidunt arcu. Nulla at augulla at augue sem.</div><div class="ts">12:44 am</div></div>
						<div class="msg"><span class="user">Teacher:</span>   <div class="msgcon">Aliquam enim neque, tempor eu sodales a, fermentum et urna.</div><div class="ts">12:44 am</div></div>
						<div class="msg"><span class="user">Teacher:</span>   <div class="msgcon">Nulla at augue sem.tiam in tincidunt arcu. Nulla at aulla at augue sem.ue sem.</div><div class="ts">12:44 am</div></div>
						<div class="msg"><span class="user">Teacher:</span>   <div class="msgcon">Aliquam enim neque, tempor eu sodales a, fermentum et urna.</div><div class="ts">12:44 am</div></div>
						<div class="msg"><span class="user">Teacher:</span>   <div class="msgcon">Etiam in tincidunt arcu. Nulla at augue sem.</div><div class="ts">12:44 am</div></div>
						<div class="msg"><span class="user">Teacher:</span>   <div class="msgcon">Aliquam enim neque, tempor eu sodales a, fermentum et urna.</div><div class="ts">12:44 am</div></div>
						<div class="msg"><span class="user">Teacher:</span>   <div class="msgcon">Etiam in tincidunt arcu. Nulla at augue sem.</div><div class="ts">12:44 am</div></div>
						<div class="msg"><span class="user">Teacher:</span>   <div class="msgcon">Aliquam enim neque, tempor eu sodales a, fermentum et urna.</div><div class="ts">12:44 am</div></div>
						<div class="msg"><span class="user">Teacher:</span>   <div class="msgcon">Etiam in tincidunt arcu. Nulla at augue sem.</div><div class="ts">12:44 am</div></div>
						<div class="msg"><span class="user">Teacher:</span>   <div class="msgcon">Aliquam enim neque, tempor eu sodales a, fermentum et urna.</div><div class="ts">12:44 am</div></div>
						<div class="msg"><span class="user">Teacher:</span>   <div class="msgcon">Etiam in tincidunt arcu. Nulla u sodales a, feu sodales a, fermentum et urna.</div><div class="ts">12:44 am</div></div>
						<div class="msg"><span class="user">Teacher:</span>   <div class="msgcon">Aliquam enim neque, tempor eu sodales a, fermentum et urna.</div><div class="ts">12:44 am</div></div>
						<div class="msg"><span class="user">Teacher:</span>   <div class="msgcon">Etiam in tincidunt arcu. Nulla at augulla at augue sem.</div><div class="ts">12:44 am</div></div>
						<div class="msg"><span class="user">Teacher:</span>   <div class="msgcon">Aliquam enim neque, tempor eu sodales a, fermentum et urna.</div><div class="ts">12:44 am</div></div>
						<div class="msg"><span class="user">Teacher:</span>   <div class="msgcon">Nulla at augue sem.tiam in tincidunt arcu. Nulla at aulla at augue sem.ue sem.</div><div class="ts">12:44 am</div></div>
						<div class="msg"><span class="user">Teacher:</span>   <div class="msgcon">Aliquam enim neque, tempor eu sodales a, fermentum et urna.</div><div class="ts">12:44 am</div></div>
						<div class="msg"><span class="user">Teacher:</span>   <div class="msgcon">Etiam in tincidunt arcu. Nulla at augue sem.</div><div class="ts">12:44 am</div></div>
						<div class="msg"><span class="user">Teacher:</span>   <div class="msgcon">Aliquam enim neque, tempor eu sodales a, fermentum et urna.</div><div class="ts">12:44 am</div></div>
						<div class="msg"><span class="user">Teacher:</span>   <div class="msgcon">Etiam in tincidunt arcu. Nulla at augue sem.</div><div class="ts">12:44 am</div></div>
						<div class="msg"><span class="user">Teacher:</span>   <div class="msgcon">Aliquam enim neque, tempor eu sodales a, fermentum et urna.</div><div class="ts">12:44 am</div></div>
						<div class="msg"><span class="user">Teacher:</span>   <div class="msgcon">Etiam in tincidunt arcu. Nulla at augue sem.</div><div class="ts">12:44 am</div></div>
						<div class="msg"><span class="user">Teacher:</span>   <div class="msgcon">Aliquam enim neque, tempor eu sodales a, fermentum et urna.</div><div class="ts">12:44 am</div></div>
						<div class="msg"><span class="user">Teacher:</span>   <div class="msgcon">Etiam in tincidunt arcu. Nulla u sodales a, feu sodales a, fermentum et urna.</div><div class="ts">12:44 am</div></div>
						<div class="msg"><span class="user">Teacher:</span>   <div class="msgcon">Aliquam enim neque, tempor eu sodales a, fermentum et urna.</div><div class="ts">12:44 am</div></div>
						<div class="msg"><span class="user">Teacher:</span>   <div class="msgcon">Etiam in tincidunt arcu. Nulla at augulla at augue sem.</div><div class="ts">12:44 am</div></div>
						<div class="msg"><span class="user">Teacher:</span>   <div class="msgcon">Aliquam enim neque, tempor eu sodales a, fermentum et urna.</div><div class="ts">12:44 am</div></div>
						<div class="msg"><span class="user">Teacher:</span>   <div class="msgcon">Nulla at augue sem.tiam in tincidunt arcu. Nulla at aulla at augue sem.ue sem.</div><div class="ts">12:44 am</div></div>
						<div class="msg"><span class="user">Teacher:</span>   <div class="msgcon">Aliquam enim neque, tempor eu sodales a, fermentum et urna.</div><div class="ts">12:44 am</div></div>
						<div class="msg"><span class="user">Teacher:</span>   <div class="msgcon">Etiam in tincidunt arcu. Nulla at augue sem.</div><div class="ts">12:44 am</div></div>
						<div class="msg"><span class="user">Teacher:</span>   <div class="msgcon">Aliquam enim neque, tempor eu sodales a, fermentum et urna.</div><div class="ts">12:44 am</div></div>
						<div class="msg"><span class="user">Teacher:</span>   <div class="msgcon">Etiam in tincidunt arcu. Nulla at augue sem.</div><div class="ts">12:44 am</div></div>
						<div class="msg"><span class="user">Teacher:</span>   <div class="msgcon">Aliquam enim neque, tempor eu sodales a, fermentum et urna.</div><div class="ts">12:44 am</div></div>
						*}
					</div>
				</div>
			</div>
			<div class="chatgui">
				<input id="entry" type="text" class="cinput"/>
				{* <input type="image" src="/static/images/ask-btn-short2.png" class="qsubmit"/> *}
				<input type="image" src="/static/images/submit.png" class="csubmit"/>
			</div>
		</form>
	</div>
</div>
<!-- end page -->
{*
	XXX TEMPLATE THIS SNIPPET
*}
<div class="jqmWindow" id="dialog">
	<div class="modalmsg">
		<div class="modaltxt">
			<h3>Welcome to the digital classroom demo.</h3>
			<p>This is the student’s demonstration device.<br />Please touch the “Login Now” to login to the student’s control panel.</p>
		</div>
		<div class="modalbranding">
			
		</div>
	</div>
	<form id="loginform">
		<div class="modalrow">
			<label>Username:</label>
			<input id="nickInput" type="text" class="modalform" name="nick"/>
		</div>
		<div class="modalrow">
			<label>Password:</label>
			<input type="text" class="modalform"/>
		</div>
		<div class="modalrow">
			<input id="connectButton" type="image" src="/static/images/login-btn.png" class="login"/>
		</div>
		<span class="modalrow" id="status"></span>
	</form>	
</div>
<div class="jqmWindow" id="qadialog">
	<div class="modalmsg">
		<div class="modaltxt">
			<h3><span id="nick"></span> Has Asked A Question</h3>
			<p><span id="question"></span></p>
		</div>
		<div class="modalbranding">
			
		</div>
	</div>
	<form id="answerform">
		<div class="modalrow">
			<label>Answer:</label>
			<input id="entry" type="text" class="cinput modalform"/>
		</div>
		<div class="modalrow">
			<input type="image" src="/static/images/submit.png" class="asubmit"/>
		</div>
	</form>	
</div>
{%/block %}
{%block 'body-scripts' %}
	<script type="text/javascript" src="/static/js/jScrollPane.js"></script>
	<script type="text/javascript" src="/static/js/jqModal.js"></script>
	<script src="/static/js/jquery.colorbox-min.js"></script>
	<link rel="stylesheet" type="text/css" href="/static/js/shadowbox-3.0.3/shadowbox.css">
	<script type="text/javascript" src="/static/js/shadowbox-3.0.3/shadowbox.js"></script>
	<script type="text/javascript">
			Shadowbox.init({
		    handleOversize: "drag",
			overlayColor: "#330099",
			overlayOpacity: "0.75",
		    modal: true,
			displayNav:         true,
			handleUnsupported:  "link",
			autoplayMovies:     true,
		});
	</script>
	<script type="text/javascript">
		// Android 10" Tablet screen dimensions 1024 x 521 PORTRAIT
		// Android 10" Tablet screen dimensions 600 x 945 PORTRAIT
		$(document).ready(function() {
			window.scrollTo(0, 1);
			$('body').addClass('bg');
			
			$('.chatscroll').jScrollPane({
				showArrows:true,
				scrollbarWidth:30,
				maintainPosition: false,
				animateTo: true,
			});
			$('#dialog').jqm({modal:true}).jqmShow();
			$('#qadialog').jqm({modal:false, autofire:true});
			var h = $(window).height();
	        var w = $(window).width();
			$(".jScrollPaneContainer").css('height',(h < 600) ? 300 : 810).css('width',(h < 600) ? 730 : 530);
			$(".chatscroll").css('width',(h < 600) ? 680 : 480);
			$(".msgcon").css('width',(h < 600) ? 600 : 350);
			$(".cinput").css('width',(h < 600) ? '80%' : '78%');
			
			$('#syncFolder').ninjaMenuCreate({
			  icon:'download', // optional image before title
			  onSelect:function(){ // optional JavaScript function
			    if(this.text() == 'Barrack Obama'){
			      alert(this.text() + ' is correct!');
			    }
			    else{
			      alert(this.text() + ' is not correct, please try again.');
			    };
			  },
			  title:'Content Sync Folder', // text that is optional when there is an icon
			  values:['No Content Available'] // array of possible values
			});
			$('span#syncFolder:not(descendant)').live("click", function() {
				// Get the sync content list
				var $dropdown = $(this).find('div.ninjaMenuChoices').empty();
				$.jsonp({
					url: 'http://localhost:' + MCP_RPC_PORT  + SYNC_FOLDER_ENDPOINT + '?jsoncallback=?',
					data: {
								channel: getChannel()
							},
					success: function(json) {
						
						if ((json.resultsCount) && (json.resultsCount > 0)) {					
							var contentlist = json.results;							
							for (var i = 0; i < contentlist.length; i++) {
								var tmp = contentlist[i].split('/');
								var filename = tmp[tmp.length-1];
								$dropdown.append('<div class="ninjaPlastic ninjaEnabled ninjaMenuChoice syncurl" style="border-top-left-radius: 0.5em 0.5em; border-top-right-radius: 0.5em 0.5em; border-bottom-right-radius: 0px 0px; border-bottom-left-radius: 0px 0px; background-color: rgb(204, 204, 204); border-top-color: rgb(153, 153, 153); border-right-color: rgb(153, 153, 153); border-bottom-color: rgb(153, 153, 153); border-left-color: rgb(153, 153, 153); color: rgb(0, 0, 0); " name="'+ contentlist[i] + '">' + filename + '</div>');
							}

							// XXX I think this will only work on android unless you change your CAPS file
							$(".syncurl").live("click", function(e) { // Attach to current and future
								var syncurl = $(this).attr('name');
								openNewWindow(syncurl);
								e.stopPropagation(); // Don't bubble up the event!!
							});
						} else {
							alert('no results');
						}
					},
					error: function(error) {
						$dropdown.append('<div class="ninjaPlastic ninjaEnabled ninjaMenuChoice" style="border-top-left-radius: 0.5em 0.5em; border-top-right-radius: 0.5em 0.5em; border-bottom-right-radius: 0px 0px; border-bottom-left-radius: 0px 0px; background-color: rgb(204, 204, 204); border-top-color: rgb(153, 153, 153); border-right-color: rgb(153, 153, 153); border-bottom-color: rgb(153, 153, 153); border-left-color: rgb(153, 153, 153); color: rgb(0, 0, 0); ">No Content Available</div>');
					},
				});
			});
		});
	</script>
	<script type="text/javascript">
		/* XXX Refactor this into epoch-client.js */
		function getChannel() {
			return '{%= channel%}';
		}
		function isTeacher() {
			return false;
		}
	</script>
	<script type="text/javascript" src="/static/js/epoch-client.js" ></script>
{%/block %}
